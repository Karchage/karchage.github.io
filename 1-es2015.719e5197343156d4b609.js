(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{DRwZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("DQLy"),s=n("8Y7J");const r=function(){var e={EntitiesOnly:0,Both:1,None:2};return e[e.EntitiesOnly]="EntitiesOnly",e[e.Both]="Both",e[e.None]="None",e}();function c(e){return function(t,n){const i={ids:[...n.ids],entities:Object.assign({},n.entities)},s=e(t,i);return s===r.Both?Object.assign({},n,i):s===r.EntitiesOnly?Object.assign({},n,{entities:i.entities}):n}}function o(e,t){const n=t(e);return Object(s.T)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),n}function a(e){function t(t,n){const i=o(t,e);return i in n.entities?r.None:(n.ids.push(i),n.entities[i]=t,r.Both)}function n(e,n){let i=!1;for(const s of e)i=t(s,n)!==r.None||i;return i?r.Both:r.None}function i(e,t){const n=(e instanceof Array?e:t.ids.filter(n=>e(t.entities[n]))).filter(e=>e in t.entities).map(e=>delete t.entities[e]).length>0;return n&&(t.ids=t.ids.filter(e=>e in t.entities)),n?r.Both:r.None}function s(t,n){const i={};return(t=t.filter(e=>e.id in n.entities)).length>0?t.filter(t=>(function(t,n,i){const s=Object.assign({},i.entities[n.id],n.changes),r=o(s,e),c=r!==n.id;return c&&(t[n.id]=r,delete i.entities[n.id]),i.entities[r]=s,c})(i,t,n)).length>0?(n.ids=n.ids.map(e=>i[e]||e),r.Both):r.EntitiesOnly:r.None}function a(t,i){const c=[],a=[];for(const n of t){const t=o(n,e);t in i.entities?a.push({id:t,changes:n}):c.push(n)}const u=s(a,i),d=n(c,i);switch(!0){case d===r.None&&u===r.None:return r.None;case d===r.Both||u===r.Both:return r.Both;default:return r.EntitiesOnly}}return{removeAll:function(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:c(t),addMany:c(n),addAll:c((function(e,t){return t.ids=[],t.entities={},n(e,t),r.Both})),updateOne:c((function(e,t){return s([e],t)})),updateMany:c(s),upsertOne:c((function(e,t){return a([e],t)})),upsertMany:c(a),removeOne:c((function(e,t){return i([e],t)})),removeMany:c(i),map:c((function(e,t){return s(t.ids.reduce((n,i)=>{const s=e(t.entities[i]);return s!==t.entities[i]&&n.push({id:i,changes:s}),n},[]).filter(({id:e})=>e in t.entities),t)}))}}function u(e={}){const{selectId:t,sortComparer:n}=Object.assign({sortComparer:!1,selectId:e=>e.id},e),s={getInitialState:function(e={}){return Object.assign({ids:[],entities:{}},e)}},u={getSelectors:function(e){const t=e=>e.ids,n=e=>e.entities,s=Object(i.y)(t,n,(e,t)=>e.map(e=>t[e])),r=Object(i.y)(t,e=>e.length);return e?{selectIds:Object(i.y)(e,t),selectEntities:Object(i.y)(e,n),selectAll:Object(i.y)(e,s),selectTotal:Object(i.y)(e,r)}:{selectIds:t,selectEntities:n,selectAll:s,selectTotal:r}}},d=n?function(e,t){const{removeOne:n,removeMany:i,removeAll:s}=a(e);function u(t,n){const i=t.filter(t=>!(o(t,e)in n.entities));return 0===i.length?r.None:(p(i,n),r.Both)}function d(t,n){const i=[],s=t.filter(t=>(function(t,n,i){if(!(n.id in i.entities))return!1;const s=Object.assign({},i.entities[n.id],n.changes),r=o(s,e);return delete i.entities[n.id],t.push(s),r!==n.id})(i,t,n)).length>0;if(0===i.length)return r.None;{const e=n.ids,t=[];return n.ids=n.ids.filter((e,i)=>e in n.entities||(t.push(i),!1)),p(i,n),!s&&t.every(t=>n.ids[t]===e[t])?r.EntitiesOnly:r.Both}}function l(t,n){const i=[],s=[];for(const r of t){const t=o(r,e);t in n.entities?s.push({id:t,changes:r}):i.push(r)}const c=d(s,n),a=u(i,n);switch(!0){case a===r.None&&c===r.None:return r.None;case a===r.Both||c===r.Both:return r.Both;default:return r.EntitiesOnly}}function p(n,i){n.sort(t);const s=[];let r=0,c=0;for(;r<n.length&&c<i.ids.length;){const a=n[r],u=o(a,e),d=i.ids[c];t(a,i.entities[d])<=0?(s.push(u),r++):(s.push(d),c++)}i.ids=s.concat(r<n.length?n.slice(r).map(e):i.ids.slice(c)),n.forEach((t,n)=>{i.entities[e(t)]=t})}return{removeOne:n,removeMany:i,removeAll:s,addOne:c((function(e,t){return u([e],t)})),updateOne:c((function(e,t){return d([e],t)})),upsertOne:c((function(e,t){return l([e],t)})),addAll:c((function(e,t){return t.entities={},t.ids=[],u(e,t),r.Both})),addMany:c(u),updateMany:c(d),upsertMany:c(l),map:c((function(e,t){return d(t.ids.reduce((n,i)=>{const s=e(t.entities[i]);return s!==t.entities[i]&&n.push({id:i,changes:s}),n},[]),t)}))}}(t,n):a(t);return Object.assign({selectId:t,sortComparer:n},s,u,d)}},ePcv:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("mrSG"),s=n("Yml6"),r=n("H8Q/"),c=n("LRne"),o=n("5+tZ"),a=n("lJxs"),u=n("JIr8");let d=(()=>{class e{constructor(e,t){this.actions$=e,this.userService=t,this.loadUsers$=this.actions$.pipe(Object(s.d)(r.m.LOAD_USERS),Object(o.a)(e=>this.userService.getUsers().pipe(Object(a.a)(e=>new r.i(e)),Object(u.a)(e=>Object(c.a)(new r.h(e)))))),this.loadUser$=this.actions$.pipe(Object(s.d)(r.m.LOAD_USER),Object(o.a)(e=>this.userService.getUserById(e.payload).pipe(Object(a.a)(e=>new r.f(e)),Object(u.a)(e=>Object(c.a)(new r.e(e)))))),this.createUser$=this.actions$.pipe(Object(s.d)(r.m.CREATE_USER),Object(a.a)(e=>e.payload),Object(o.a)(e=>this.userService.createUser(e).pipe(Object(a.a)(e=>new r.c(e)),Object(u.a)(e=>Object(c.a)(new r.b(e)))))),this.updateUser$=this.actions$.pipe(Object(s.d)(r.m.UPDATE_USER),Object(a.a)(e=>e.payload),Object(o.a)(e=>this.userService.updateUser(e).pipe(Object(a.a)(e=>new r.l({id:e.id,changes:e})),Object(u.a)(e=>Object(c.a)(new r.k(e))))))}}return i.a([Object(s.b)()],e.prototype,"loadUsers$",void 0),i.a([Object(s.b)()],e.prototype,"loadUser$",void 0),i.a([Object(s.b)()],e.prototype,"createUser$",void 0),i.a([Object(s.b)()],e.prototype,"updateUser$",void 0),e})()},mgGq:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var i=n("H8Q/"),s=n("DQLy"),r=n("DRwZ");const c=Object(r.a)(),o=c.getInitialState({ids:[],entities:{},selectedUserId:null,loading:!1,loaded:!1,error:""});function a(e=o,t){switch(t.type){case i.m.LOAD_USERS_SUCCESS:return c.addAll(t.payload,Object.assign({},e,{loading:!1,loaded:!0}));case i.m.LOAD_USERS_FAIL:return Object.assign({},e,{entities:{},loading:!1,loaded:!1,error:t.payload});case i.m.LOAD_USER_SUCCESS:return c.addOne(t.payload,Object.assign({},e,{selectedUserId:t.payload.id}));case i.m.LOAD_USER_FAIL:return Object.assign({},e,{error:t.payload});case i.m.CREATE_USER_SUCCESS:return c.addOne(t.payload,e);case i.m.CREATE_USER_FAIL:return Object.assign({},e,{error:t.payload});case i.m.UPDATE_USER_SUCCESS:return c.updateOne(t.payload,e);case i.m.UPDATE_USER_FAIL:return Object.assign({},e,{error:t.payload});default:return e}}const u=Object(s.w)("users"),d=Object(s.y)(u,c.getSelectors().selectAll),l=(Object(s.y)(u,e=>e.loading),Object(s.y)(u,e=>e.loaded),Object(s.y)(u,e=>e.error),Object(s.y)(u,e=>e.selectedUserId)),p=Object(s.y)(u,l,e=>e.entities[e.selectedUserId])},mrSG:function(e,t,n){"use strict";function i(e,t,n,i){var s,r=arguments.length,c=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(c=(r<3?s(c):r>3?s(t,n,c):s(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c}n.d(t,"a",(function(){return i}))},qfBg:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("AytR"),s=n("lJxs"),r=n("8Y7J"),c=n("IheW");let o=(()=>{class e{constructor(e){this.http=e}getUsers(){return this.http.get(`${i.a.fbDbUrl}/users.json`).pipe(Object(s.a)(e=>Object.keys(e).map(t=>Object.assign({},e[t],{DOB:new Date(e[t].DOB)}))))}getUserById(e){return this.http.get(`${i.a.fbDbUrl}/users/${e}.json`)}createUser(e){return this.http.patch(`${i.a.fbDbUrl}/users/${e.id}.json`,e).pipe(Object(s.a)(t=>Object.assign({},e,{id:t.name,DOB:new Date(e.DOB)})))}updateUser(e){return this.http.patch(`${i.a.fbDbUrl}/users/${e.id}.json`,e)}}return e.ngInjectableDef=r.Mb({factory:function(){return new e(r.Nb(c.c))},token:e,providedIn:"root"}),e})()}}]);