(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{DRwZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("DQLy"),i=n("8Y7J"),s=function(){var e={EntitiesOnly:0,Both:1,None:2};return e[e.EntitiesOnly]="EntitiesOnly",e[e.Both]="Both",e[e.None]="None",e}();function o(e){return function(t,n){var r={ids:n.ids.slice(),entities:Object.assign({},n.entities)},i=e(t,r);return i===s.Both?Object.assign({},n,r):i===s.EntitiesOnly?Object.assign({},n,{entities:r.entities}):n}}function u(e,t){var n=t(e);return Object(i.T)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),n}function c(e){function t(t,n){var r=u(t,e);return r in n.entities?s.None:(n.ids.push(r),n.entities[r]=t,s.Both)}function n(e,n){for(var r=!1,i=0,o=e;i<o.length;i++){r=t(o[i],n)!==s.None||r}return r?s.Both:s.None}function r(e,t){var n=(e instanceof Array?e:t.ids.filter((function(n){return e(t.entities[n])}))).filter((function(e){return e in t.entities})).map((function(e){return delete t.entities[e]})).length>0;return n&&(t.ids=t.ids.filter((function(e){return e in t.entities}))),n?s.Both:s.None}function i(t,n){var r={};return(t=t.filter((function(e){return e.id in n.entities}))).length>0?t.filter((function(t){return function(t,n,r){var i=Object.assign({},r.entities[n.id],n.changes),s=u(i,e),o=s!==n.id;return o&&(t[n.id]=s,delete r.entities[n.id]),r.entities[s]=i,o}(r,t,n)})).length>0?(n.ids=n.ids.map((function(e){return r[e]||e})),s.Both):s.EntitiesOnly:s.None}function c(t,r){for(var o=[],c=[],a=0,d=t;a<d.length;a++){var f=d[a],l=u(f,e);l in r.entities?c.push({id:l,changes:f}):o.push(f)}var p=i(c,r),O=n(o,r);switch(!0){case O===s.None&&p===s.None:return s.None;case O===s.Both||p===s.Both:return s.Both;default:return s.EntitiesOnly}}return{removeAll:function(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:o(t),addMany:o(n),addAll:o((function(e,t){return t.ids=[],t.entities={},n(e,t),s.Both})),updateOne:o((function(e,t){return i([e],t)})),updateMany:o(i),upsertOne:o((function(e,t){return c([e],t)})),upsertMany:o(c),removeOne:o((function(e,t){return r([e],t)})),removeMany:o(r),map:o((function(e,t){return i(t.ids.reduce((function(n,r){var i=e(t.entities[r]);return i!==t.entities[r]&&n.push({id:r,changes:i}),n}),[]).filter((function(e){return e.id in t.entities})),t)}))}}function a(e){void 0===e&&(e={});var t=Object.assign({sortComparer:!1,selectId:function(e){return e.id}},e),n=t.selectId,i=t.sortComparer,a={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},d={getSelectors:function(e){var t=function(e){return e.ids},n=function(e){return e.entities},i=Object(r.y)(t,n,(function(e,t){return e.map((function(e){return t[e]}))})),s=Object(r.y)(t,(function(e){return e.length}));return e?{selectIds:Object(r.y)(e,t),selectEntities:Object(r.y)(e,n),selectAll:Object(r.y)(e,i),selectTotal:Object(r.y)(e,s)}:{selectIds:t,selectEntities:n,selectAll:i,selectTotal:s}}},f=i?function(e,t){var n=c(e);function r(t,n){var r=t.filter((function(t){return!(u(t,e)in n.entities)}));return 0===r.length?s.None:(d(r,n),s.Both)}function i(t,n){var r=[],i=t.filter((function(t){return function(t,n,r){if(!(n.id in r.entities))return!1;var i=Object.assign({},r.entities[n.id],n.changes),s=u(i,e);return delete r.entities[n.id],t.push(i),s!==n.id}(r,t,n)})).length>0;if(0===r.length)return s.None;var o=n.ids,c=[];return n.ids=n.ids.filter((function(e,t){return e in n.entities||(c.push(t),!1)})),d(r,n),!i&&c.every((function(e){return n.ids[e]===o[e]}))?s.EntitiesOnly:s.Both}function a(t,n){for(var o=[],c=[],a=0,d=t;a<d.length;a++){var f=d[a],l=u(f,e);l in n.entities?c.push({id:l,changes:f}):o.push(f)}var p=i(c,n),O=r(o,n);switch(!0){case O===s.None&&p===s.None:return s.None;case O===s.Both||p===s.Both:return s.Both;default:return s.EntitiesOnly}}function d(n,r){n.sort(t);for(var i=[],s=0,o=0;s<n.length&&o<r.ids.length;){var c=n[s],a=u(c,e),d=r.ids[o];t(c,r.entities[d])<=0?(i.push(a),s++):(i.push(d),o++)}r.ids=i.concat(s<n.length?n.slice(s).map(e):r.ids.slice(o)),n.forEach((function(t,n){r.entities[e(t)]=t}))}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:o((function(e,t){return r([e],t)})),updateOne:o((function(e,t){return i([e],t)})),upsertOne:o((function(e,t){return a([e],t)})),addAll:o((function(e,t){return t.entities={},t.ids=[],r(e,t),s.Both})),addMany:o(r),updateMany:o(i),upsertMany:o(a),map:o((function(e,t){return i(t.ids.reduce((function(n,r){var i=e(t.entities[r]);return i!==t.entities[r]&&n.push({id:r,changes:i}),n}),[]),t)}))}}(n,i):c(n);return Object.assign({selectId:n,sortComparer:i},a,d,f)}},ePcv:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("mrSG"),i=n("Yml6"),s=n("H8Q/"),o=n("LRne"),u=n("5+tZ"),c=n("lJxs"),a=n("JIr8"),d=function(){var e=function(e,t){var n=this;this.actions$=e,this.userService=t,this.loadUsers$=this.actions$.pipe(Object(i.d)(s.m.LOAD_USERS),Object(u.a)((function(e){return n.userService.getUsers().pipe(Object(c.a)((function(e){return new s.i(e)})),Object(a.a)((function(e){return Object(o.a)(new s.h(e))})))}))),this.loadUser$=this.actions$.pipe(Object(i.d)(s.m.LOAD_USER),Object(u.a)((function(e){return n.userService.getUserById(e.payload).pipe(Object(c.a)((function(e){return new s.f(e)})),Object(a.a)((function(e){return Object(o.a)(new s.e(e))})))}))),this.createUser$=this.actions$.pipe(Object(i.d)(s.m.CREATE_USER),Object(c.a)((function(e){return e.payload})),Object(u.a)((function(e){return n.userService.createUser(e).pipe(Object(c.a)((function(e){return new s.c(e)})),Object(a.a)((function(e){return Object(o.a)(new s.b(e))})))}))),this.updateUser$=this.actions$.pipe(Object(i.d)(s.m.UPDATE_USER),Object(c.a)((function(e){return e.payload})),Object(u.a)((function(e){return n.userService.updateUser(e).pipe(Object(c.a)((function(e){return new s.l({id:e.id,changes:e})})),Object(a.a)((function(e){return Object(o.a)(new s.k(e))})))})))};return r.a([Object(i.b)()],e.prototype,"loadUsers$",void 0),r.a([Object(i.b)()],e.prototype,"loadUser$",void 0),r.a([Object(i.b)()],e.prototype,"createUser$",void 0),r.a([Object(i.b)()],e.prototype,"updateUser$",void 0),e}()},mgGq:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l}));var r=n("H8Q/"),i=n("DQLy"),s=n("DRwZ"),o=Object(s.a)(),u=o.getInitialState({ids:[],entities:{},selectedUserId:null,loading:!1,loaded:!1,error:""});function c(e,t){switch(void 0===e&&(e=u),t.type){case r.m.LOAD_USERS_SUCCESS:return o.addAll(t.payload,Object.assign({},e,{loading:!1,loaded:!0}));case r.m.LOAD_USERS_FAIL:return Object.assign({},e,{entities:{},loading:!1,loaded:!1,error:t.payload});case r.m.LOAD_USER_SUCCESS:return o.addOne(t.payload,Object.assign({},e,{selectedUserId:t.payload.id}));case r.m.LOAD_USER_FAIL:return Object.assign({},e,{error:t.payload});case r.m.CREATE_USER_SUCCESS:return o.addOne(t.payload,e);case r.m.CREATE_USER_FAIL:return Object.assign({},e,{error:t.payload});case r.m.UPDATE_USER_SUCCESS:return o.updateOne(t.payload,e);case r.m.UPDATE_USER_FAIL:return Object.assign({},e,{error:t.payload});default:return e}}var a=Object(i.w)("users"),d=Object(i.y)(a,o.getSelectors().selectAll),f=(Object(i.y)(a,(function(e){return e.loading})),Object(i.y)(a,(function(e){return e.loaded})),Object(i.y)(a,(function(e){return e.error})),Object(i.y)(a,(function(e){return e.selectedUserId}))),l=Object(i.y)(a,f,(function(e){return e.entities[e.selectedUserId]}))},mrSG:function(e,t,n){"use strict";function r(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}n.d(t,"a",(function(){return r}))},qfBg:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("AytR"),i=n("lJxs"),s=n("8Y7J"),o=n("IheW"),u=function(){var e=function(){function e(e){this.http=e}return e.prototype.getUsers=function(){return this.http.get(r.a.fbDbUrl+"/users.json").pipe(Object(i.a)((function(e){return Object.keys(e).map((function(t){return Object.assign({},e[t],{DOB:new Date(e[t].DOB)})}))})))},e.prototype.getUserById=function(e){return this.http.get(r.a.fbDbUrl+"/users/"+e+".json")},e.prototype.createUser=function(e){return this.http.patch(r.a.fbDbUrl+"/users/"+e.id+".json",e).pipe(Object(i.a)((function(t){return Object.assign({},e,{id:t.name,DOB:new Date(e.DOB)})})))},e.prototype.updateUser=function(e){return this.http.patch(r.a.fbDbUrl+"/users/"+e.id+".json",e)},e}();return e.ngInjectableDef=s.Mb({factory:function(){return new e(s.Nb(o.c))},token:e,providedIn:"root"}),e}()}}]);